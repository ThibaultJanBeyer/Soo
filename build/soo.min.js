!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.soo=e()}(this,function(){"use strict";const t=()=>Math.random().toString(36).slice(2).padStart(10,"0");String.prototype.html=function(){return(new DOMParser).parseFromString(this,"text/html").body.firstChild},String.prototype.svg=function(){return(new DOMParser).parseFromString(this,"image/svg+xml").documentElement};class e{constructor(t,...e){this.values_map=[],this.string=this.concat_string(t,e)}concat_string(e,n){return e.map((e,i)=>{const s=n[i],a=t();switch(!0){case"function"==typeof s:e=e.concat(`" data-${a}="`),this.values_map.push({id:a,value:s});break;case"object"==typeof s||s&&1===s.nodeType:e=`${e} <template data-${a}=""></template>`,this.values_map.push({id:a,value:s});break;case"string"==typeof s:e=`${e}${s||""}`}return e}).reduce((t,e)=>t+e)}get fragment(){const t=document.createElement("template");return t.innerHTML=this.string,this.place_values(t.content.cloneNode(!0))}get container(){return this.place_values(this.string.html())}get svg(){const t=this.container;return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.place_values(t.outerHTML.svg())}place_values(t){return this.values_map.forEach(e=>{const n=t.outerHTML?t.parentNode.querySelector(`[data-${e.id}]`):t.querySelector(`[data-${e.id}]`);if(!n)throw new Error('Warning function must be defined between parentheses for example "${calledFunction}"');if("function"==typeof e.value){const t=/(on)\w+/g.exec(n.outerHTML)[0].split("on")[1];n.addEventListener(t,e.value.bind(this)),n.removeAttribute(`on${t}`),n.removeAttribute(`data-${e.id}`)}else if("object"==typeof e.value)if(e.value.children)n.replaceWith(e.value);else{const t=document.createDocumentFragment();t.append(...e.value),n.replaceWith(t)}}),t}}window.HTML=function(t,...n){return new e(t,...n)};class n extends HTMLElement{constructor(){super(),this.noShadow||this.attachShadow({mode:"open"})}async connectedCallback(){if(this.container=this.noShadow?this:this.shadowRoot,this.css&&this.container.appendChild(function(t){const e=document.createElement("style");return e.textContent=t,e}(this.css())),this.install.apply(this),this.beforeRender(),this.render){const t=await this.render();this.container.appendChild(t.container)}this.installed()}disconnectedCallback(){this.uninstall()}fire(t,e){this.dispatchEvent(new CustomEvent(t,{detail:e}))}fireGlobal(t,e){document.dispatchEvent(new CustomEvent(t,{detail:e}))}updateDom(t){this.container.lastChild.replaceWith(t)}async update(){if(this.beforeUpdate(),this.render){const t=await this.render();this.updateDom(t.container)}this.afterUpdate()}install(){}installed(){}uninstall(){}beforeUpdate(){}afterUpdate(){}beforeRender(){}}return window.Soo=n,n});
